<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Launch Readiness Assessment | Eatpol</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f7;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .assessment-header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1297e0, #00bf63);
            color: white;
            border-radius: 20px;
            margin-bottom: 40px;
        }
        
        .assessment-header h1 {
            font-size: 36px;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .assessment-header p {
            font-size: 20px;
            opacity: 0.95;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }
        
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background: #1297e0;
            color: white;
            transform: scale(1.1);
        }
        
        .step.completed {
            background: #00bf63;
            color: white;
        }
        
        .question-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            display: none;
        }
        
        .question-card.active {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question-title {
            font-size: 24px;
            margin-bottom: 8px;
            color: #1a1a1a;
            font-weight: 600;
        }
        
        .question-subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #1297e0;
        }
        
        .options-grid {
            display: grid;
            gap: 12px;
        }
        
        .option.multi-select {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .checkbox-icon {
            font-size: 20px;
            color: #1297e0;
            flex-shrink: 0;
        }
        
        .option.multi-select.selected {
            background: linear-gradient(135deg, rgba(18, 151, 224, 0.1), rgba(0, 191, 99, 0.1));
            border-color: #1297e0;
            color: #1a1a1a;
        }
        
        .option-text {
            flex: 1;
        }
        
        .option {
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .option:hover {
            border-color: #1297e0;
            transform: translateX(4px);
        }
        
        .option.selected {
            background: linear-gradient(135deg, #1297e0, #00bf63);
            color: white;
            border-color: transparent;
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1297e0, #00bf63);
            color: white;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(18, 151, 224, 0.3);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: scale(1);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #1297e0, #00bf63);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .results-container {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .score-display {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            position: relative;
        }
        
        .score-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(#00bf63 0deg, #1297e0 180deg, #e0e0e0 180deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .score-inner {
            width: 160px;
            height: 160px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .score-number {
            font-size: 48px;
            font-weight: 700;
            color: #1a1a1a;
        }
        
        .score-label {
            font-size: 16px;
            color: #666;
        }
        
        .risk-badge {
            display: inline-block;
            padding: 8px 24px;
            border-radius: 24px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .risk-high {
            background: #ffebee;
            color: #c62828;
        }
        
        .risk-moderate {
            background: #fff3e0;
            color: #ef6c00;
        }
        
        .risk-low {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        .risk-ready {
            background: linear-gradient(135deg, #00bf63, #1297e0);
            color: white;
        }
        
        .results-title {
            font-size: 32px;
            margin-bottom: 20px;
            color: #1a1a1a;
        }
        
        .insights-list {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .insight-item {
            display: flex;
            align-items: start;
            margin-bottom: 20px;
            gap: 15px;
        }
        
        .insight-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #1297e0, #00bf63);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .insight-text {
            flex: 1;
            color: #333;
            line-height: 1.5;
        }
        
        .cta-section {
            background: linear-gradient(135deg, rgba(18, 151, 224, 0.1), rgba(0, 191, 99, 0.1));
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .cta-title {
            font-size: 24px;
            margin-bottom: 12px;
            color: #1a1a1a;
        }
        
        .cta-description {
            color: #666;
            margin-bottom: 20px;
        }
        
        .lead-magnet {
            background: white;
            border: 2px solid #1297e0;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .lead-magnet-title {
            font-size: 20px;
            color: #1297e0;
            margin-bottom: 10px;
        }
        
        .lead-magnet-list {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .lead-magnet-list li {
            padding: 8px 0;
            color: #666;
        }
        
        .lead-magnet-list li:before {
            content: "✓ ";
            color: #00bf63;
            font-weight: 600;
            margin-right: 8px;
        }
        
        .error-message {
            color: #c62828;
            font-size: 14px;
            margin-top: 8px;
            display: none;
        }
        
        .contact-summary {
            background: #f5f5f7;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .contact-summary h3 {
            color: #1a1a1a;
            margin-bottom: 12px;
        }
        
        .contact-summary p {
            color: #666;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Landing Section -->
        <div id="landingSection">
            <div class="assessment-header">
                <h1>Is your product ready for a successful launch?</h1>
                <p>Take this 3-minute assessment to identify hidden risks in your food product and get a personalized testing roadmap</p>
            </div>
            
            <div style="background: white; border-radius: 16px; padding: 30px; margin-bottom: 30px;">
                <h2 style="font-size: 24px; margin-bottom: 20px; color: #1a1a1a;">Discover your testing blind spots</h2>
                <p style="color: #666; margin-bottom: 20px;">This assessment will measure and improve three critical areas:</p>
                
                <div style="display: grid; gap: 16px; margin-bottom: 30px;">
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <div style="width: 40px; height: 40px; background: #e8f5e9; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                            <span style="font-size: 20px;">🎯</span>
                        </div>
                        <div>
                            <strong style="color: #1a1a1a;">Product-Market Fit</strong>
                            <p style="color: #666; font-size: 14px; margin-top: 4px;">How well your product aligns with real consumer behavior</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <div style="width: 40px; height: 40px; background: #e3f2fd; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                            <span style="font-size: 20px;">🔬</span>
                        </div>
                        <div>
                            <strong style="color: #1a1a1a;">Testing Readiness</strong>
                            <p style="color: #666; font-size: 14px; margin-top: 4px;">Whether your current testing approach captures authentic feedback</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; align-items: start;">
                        <div style="width: 40px; height: 40px; background: #fff3e0; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                            <span style="font-size: 20px;">⚠️</span>
                        </div>
                        <div>
                            <strong style="color: #1a1a1a;">Launch Risk Score</strong>
                            <p style="color: #666; font-size: 14px; margin-top: 4px;">Hidden failure points in texture, usability, or concept</p>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" onclick="startAssessment()">
                    Start Free Assessment →
                </button>
            </div>
            
            <div style="background: white; border-radius: 16px; padding: 20px; border-left: 4px solid #1297e0;">
                <p style="color: #666; font-size: 14px;">
                    <strong style="color: #1a1a1a;">Created by Eatpol</strong><br>
                    Wageningen University spin-off •
                </p>
            </div>
        </div>
        
        <!-- Assessment Section -->
        <div id="assessmentSection" style="display: none;">
            <div class="step-indicator" id="stepIndicator"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%;"></div>
            </div>
            
            <!-- Contact Information -->
            <div class="question-card active" data-step="1">
                <h2 class="question-title">Let's start with your information</h2>
                <p class="question-subtitle">We'll use this to send your personalized assessment results</p>
                
                <div class="input-group">
                    <label for="firstName">First Name *</label>
                    <input type="text" id="firstName" required>
                    <span class="error-message">Please enter your first name</span>
                </div>
                
                <div class="input-group">
                    <label for="email">Email Address *</label>
                    <input type="email" id="email" required>
                    <span class="error-message">Please enter a valid email address</span>
                </div>
                
                <div class="input-group">
                    <label for="company">Company Name *</label>
                    <input type="text" id="company" required>
                    <span class="error-message">Please enter your company name</span>
                </div>
                
                <div class="input-group">
                    <label for="phone">Phone Number (Optional)</label>
                    <input type="tel" id="phone">
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="nextQuestion(1)">Continue →</button>
                </div>
            </div>
            
            <!-- Questions will be dynamically added here -->
            <div id="questionsContainer"></div>
        </div>
        
        <!-- Results Section -->
        <div id="resultsSection" class="results-container"></div>
    </div>
    
    <script>
        // Assessment data structure
        const assessmentData = {
            contact: {},
            answers: {},
            currentStep: 1,
            totalSteps: 16 // 1 contact + 15 questions
        };
        
        // Questions data
        const questions = [
            {
                id: 'q1',
                type: 'best-practice',
                title: 'Do you currently test products in real home environments?',
                subtitle: 'This captures authentic consumer behavior vs. artificial lab settings',
                options: [
                    { value: 'extensive', text: 'Yes, extensively', points: 10 },
                    { value: 'sometimes', text: 'Sometimes', points: 6 },
                    { value: 'labs', text: 'No, we use labs/booths', points: 2 },
                    { value: 'unsure', text: 'Not sure', points: 0 }
                ]
            },
            {
                id: 'q2',
                type: 'best-practice',
                title: 'Do you capture the complete consumer journey?',
                subtitle: 'From preparation to storage, not just consumption',
                options: [
                    { value: 'all', text: 'Yes, all stages', points: 10 },
                    { value: 'some', text: 'Some stages', points: 6 },
                    { value: 'consumption', text: 'Only consumption', points: 3 },
                    { value: 'none', text: 'No systematic capture', points: 0 }
                ]
            },
            {
                id: 'q3',
                type: 'best-practice',
                title: 'Do you test with at least 30 households per product iteration?',
                subtitle: 'Statistical significance requires adequate sample size',
                options: [
                    { value: '30plus', text: 'Yes, 30+', points: 10 },
                    { value: '15-29', text: '15-29 households', points: 6 },
                    { value: 'less15', text: 'Less than 15', points: 3 },
                    { value: 'none', text: 'No consumer testing', points: 0 }
                ]
            },
            {
                id: 'q4',
                type: 'best-practice',
                title: 'Do you use AI/video analysis to capture non-verbal feedback?',
                subtitle: 'Facial expressions and behaviors reveal what surveys miss',
                options: [
                    { value: 'advanced', text: 'Yes, advanced systems', points: 10 },
                    { value: 'basic', text: 'Basic video recording', points: 5 },
                    { value: 'audio', text: 'Audio only', points: 2 },
                    { value: 'none', text: 'No recording', points: 0 }
                ]
            },
            {
                id: 'q5',
                type: 'best-practice',
                title: 'For plant-based products, do you measure texture acceptance quantitatively?',
                subtitle: 'Texture is the #1 failure point for plant-based foods',
                options: [
                    { value: 'instruments', text: 'Yes, with instruments', points: 10 },
                    { value: 'subjective', text: 'Subjective ratings only', points: 5 },
                    { value: 'notapplicable', text: 'Not applicable', points: 10 },
                    { value: 'none', text: 'No texture testing', points: 0 }
                ]
            },
            {
                id: 'q6',
                type: 'best-practice',
                title: 'Do you test packaging usability in real-world conditions?',
                subtitle: 'Poor packaging can kill even great products',
                options: [
                    { value: 'systematic', text: 'Yes, systematically', points: 10 },
                    { value: 'sometimes', text: 'Sometimes', points: 6 },
                    { value: 'rarely', text: 'Rarely', points: 2 },
                    { value: 'never', text: 'Never', points: 0 }
                ]
            },
            {
                id: 'q7',
                type: 'best-practice',
                title: 'Do you capture emotional responses during consumption?',
                subtitle: 'Emotions drive 95% of purchase decisions',
                options: [
                    { value: 'facial', text: 'Yes, with facial coding', points: 10 },
                    { value: 'survey', text: 'Survey questions only', points: 5 },
                    { value: 'notes', text: 'Observation notes', points: 3 },
                    { value: 'none', text: 'No emotion tracking', points: 0 }
                ]
            },
            {
                id: 'q8',
                type: 'best-practice',
                title: 'Do you test multiple iterations before launch?',
                subtitle: 'Successful products average 12 iterations',
                options: [
                    { value: '10plus', text: '10+ iterations', points: 10 },
                    { value: '5-9', text: '5-9 iterations', points: 7 },
                    { value: '2-4', text: '2-4 iterations', points: 4 },
                    { value: 'single', text: 'Single version only', points: 0 }
                ]
            },
            {
                id: 'q9',
                type: 'best-practice',
                title: 'Do you benchmark against competitor products?',
                subtitle: 'Relative performance predicts market success',
                options: [
                    { value: 'always', text: 'Always', points: 10 },
                    { value: 'sometimes', text: 'Sometimes', points: 6 },
                    { value: 'rarely', text: 'Rarely', points: 2 },
                    { value: 'never', text: 'Never', points: 0 }
                ]
            },
            {
                id: 'q10',
                type: 'best-practice',
                title: 'Do you get actionable insights within 2 weeks of testing?',
                subtitle: 'Speed enables rapid iteration and improvement',
                options: [
                    { value: 'week1', text: 'Yes, within 1 week', points: 10 },
                    { value: 'weeks2', text: '1-2 weeks', points: 7 },
                    { value: 'weeks4', text: '2-4 weeks', points: 3 },
                    { value: 'month', text: 'Over a month', points: 0 }
                ]
            },
            {
                id: 'q11',
                type: 'qualifying',
                title: 'What types of products are you working on?',
                subtitle: 'Select all that apply - this helps us customize our recommendations',
                multiSelect: true,
                options: [
                    { value: 'plantbased', text: 'Plant-based alternatives', points: 0 },
                    { value: 'snacks', text: 'Snacks or confectionery', points: 0 },
                    { value: 'beverage', text: 'Beverages', points: 0 },
                    { value: 'prepared', text: 'Prepared meals or convenience foods', points: 0 },
                    { value: 'dairy', text: 'Dairy or dairy alternatives', points: 0 },
                    { value: 'ingredients', text: 'Food ingredients/additives', points: 0 },
                    { value: 'other', text: 'Other food category', points: 0 }
                ]
            },
            {
                id: 'q12',
                type: 'qualifying',
                title: "What's your primary challenge for the next 90 days?",
                subtitle: 'We\'ll focus our recommendations on this area',
                options: [
                    { value: 'texture', text: 'Texture optimization (especially plant-based)', points: 0 },
                    { value: 'concept', text: 'Concept validation before investment', points: 0 },
                    { value: 'usage', text: 'Understanding usage problems', points: 0 },
                    { value: 'risk', text: 'Reducing product failure risk', points: 0 },
                    { value: 'competition', text: 'Competing with established brands', points: 0 }
                ]
            },
            {
                id: 'q13',
                type: 'qualifying',
                title: "What's preventing product success currently?",
                subtitle: 'Select all that apply - understanding your obstacles helps us provide better solutions',
                multiSelect: true,
                options: [
                    { value: 'artificial', text: 'Artificial testing environments', points: 0 },
                    { value: 'slow', text: 'Slow, expensive testing cycles', points: 0 },
                    { value: 'data', text: 'Missing emotional/behavioral data', points: 0 },
                    { value: 'texture', text: 'Poor texture acceptance', points: 0 },
                    { value: 'unclear', text: 'Unclear consumer preferences', points: 0 }
                ]
            },
            {
                id: 'q14',
                type: 'qualifying',
                title: 'Which testing solutions would help you most?',
                subtitle: 'Select all that interest you - we\'ll tailor our recommendations',
                multiSelect: true,
                options: [
                    { value: 'texture', text: 'Texture optimization & bite/chew modeling', points: 0 },
                    { value: 'inhome', text: 'In-home consumer behavior testing', points: 0 },
                    { value: 'concept', text: 'AI-moderated concept testing', points: 0 },
                    { value: 'emotion', text: 'Emotional response & facial coding', points: 0 },
                    { value: 'benchmark', text: 'Competitive benchmarking', points: 0 },
                    { value: 'packaging', text: 'Packaging usability testing', points: 0 },
                    { value: 'rapid', text: 'Rapid iteration testing (< 1 week)', points: 0 }
                ]
            },
            {
                id: 'q15',
                type: 'qualifying',
                title: 'What are your main concerns about current testing?',
                subtitle: 'Select all that apply - this helps us address your specific pain points',
                multiSelect: true,
                options: [
                    { value: 'cost', text: 'Testing is too expensive', points: 0 },
                    { value: 'time', text: 'Takes too long to get results', points: 0 },
                    { value: 'artificial', text: 'Lab results don\'t match real-world usage', points: 0 },
                    { value: 'sample', text: 'Hard to find the right test participants', points: 0 },
                    { value: 'insights', text: 'Data doesn\'t provide actionable insights', points: 0 },
                    { value: 'texture', text: 'Can\'t optimize texture properly', points: 0 },
                    { value: 'emotion', text: 'Missing emotional/behavioral feedback', points: 0 },
                    { value: 'none', text: 'None of the above', points: 0 }
                ]
            }
        ];
        
        function startAssessment() {
            document.getElementById('landingSection').style.display = 'none';
            document.getElementById('assessmentSection').style.display = 'block';
            initializeStepIndicator();
            updateProgress();
        }
        
        function initializeStepIndicator() {
            const stepIndicator = document.getElementById('stepIndicator');
            for (let i = 1; i <= 16; i++) {
                const step = document.createElement('div');
                step.className = 'step';
                step.textContent = i;
                if (i === 1) step.classList.add('active');
                stepIndicator.appendChild(step);
            }
        }
        
        function validateContactForm() {
            const firstName = document.getElementById('firstName').value.trim();
            const email = document.getElementById('email').value.trim();
            const company = document.getElementById('company').value.trim();
            
            let isValid = true;
            
            if (!firstName) {
                document.querySelector('#firstName + .error-message').style.display = 'block';
                isValid = false;
            } else {
                document.querySelector('#firstName + .error-message').style.display = 'none';
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                document.querySelector('#email + .error-message').style.display = 'block';
                isValid = false;
            } else {
                document.querySelector('#email + .error-message').style.display = 'none';
            }
            
            if (!company) {
                document.querySelector('#company + .error-message').style.display = 'block';
                isValid = false;
            } else {
                document.querySelector('#company + .error-message').style.display = 'none';
            }
            
            return isValid;
        }
        
        function nextQuestion(currentStep) {
            if (currentStep === 1) {
                if (!validateContactForm()) return;
                
                assessmentData.contact = {
                    firstName: document.getElementById('firstName').value,
                    email: document.getElementById('email').value,
                    company: document.getElementById('company').value,
                    phone: document.getElementById('phone').value
                };
                
                // Generate question cards
                generateQuestionCards();
            } else {
                // Save answer
                const questionIndex = currentStep - 2;
                const question = questions[questionIndex];
                
                if (question.multiSelect) {
                    // Handle multi-select questions
                    const selectedOptions = document.querySelectorAll(`.question-card[data-step="${currentStep}"] .option.selected`);
                    if (selectedOptions.length === 0 && currentStep < 16) {
                        alert('Please select at least one option to continue');
                        return;
                    }
                    const selections = [];
                    selectedOptions.forEach(opt => {
                        selections.push({
                            value: opt.dataset.value,
                            text: opt.querySelector('.option-text').textContent,
                            points: parseInt(opt.dataset.points) || 0
                        });
                    });
                    assessmentData.answers[question.id] = selections;
                } else {
                    // Handle single-select questions
                    const selectedOption = document.querySelector(`.question-card[data-step="${currentStep}"] .option.selected`);
                    if (!selectedOption && currentStep < 16) {
                        alert('Please select an option to continue');
                        return;
                    }
                    if (selectedOption) {
                        assessmentData.answers[question.id] = {
                            value: selectedOption.dataset.value,
                            points: parseInt(selectedOption.dataset.points) || 0
                        };
                    }
                }
            }
            
            // Hide current card
            document.querySelector(`.question-card[data-step="${currentStep}"]`).classList.remove('active');
            
            // Update step indicators
            document.querySelectorAll('.step')[currentStep - 1].classList.add('completed');
            document.querySelectorAll('.step')[currentStep - 1].classList.remove('active');
            
            if (currentStep < 16) {
                // Show next card
                setTimeout(() => {
                    document.querySelector(`.question-card[data-step="${currentStep + 1}"]`).classList.add('active');
                    document.querySelectorAll('.step')[currentStep].classList.add('active');
                }, 300);
                
                assessmentData.currentStep = currentStep + 1;
                updateProgress();
            } else {
                // Show results
                showResults();
            }
        }
        
        function previousQuestion(currentStep) {
            if (currentStep > 1) {
                document.querySelector(`.question-card[data-step="${currentStep}"]`).classList.remove('active');
                document.querySelectorAll('.step')[currentStep - 1].classList.remove('active');
                document.querySelectorAll('.step')[currentStep - 2].classList.remove('completed');
                document.querySelectorAll('.step')[currentStep - 2].classList.add('active');
                
                setTimeout(() => {
                    document.querySelector(`.question-card[data-step="${currentStep - 1}"]`).classList.add('active');
                }, 300);
                
                assessmentData.currentStep = currentStep - 1;
                updateProgress();
            }
        }
        
        function generateQuestionCards() {
            const container = document.getElementById('questionsContainer');
            
            questions.forEach((question, index) => {
                const stepNumber = index + 2; // +2 because contact form is step 1
                const card = document.createElement('div');
                card.className = 'question-card';
                card.setAttribute('data-step', stepNumber);
                
                let cardHTML = `
                    <h3 style="font-size: 24px; margin: 16px 0; color: #1a1a1a;">${question.title}</h3>
                    <p class="question-subtitle">${question.subtitle}</p>
                `;
                
                if (question.multiSelect) {
                    // Multi-select with checkboxes
                    cardHTML += '<div class="options-grid">';
                    question.options.forEach(option => {
                        cardHTML += `
                            <div class="option multi-select" onclick="selectMultiOption(${stepNumber}, this)" data-value="${option.value}" data-points="${option.points}">
                                <span class="checkbox-icon">☐</span>
                                <span class="option-text">${option.text}</span>
                            </div>
                        `;
                    });
                    cardHTML += '</div>';
                    cardHTML += '<p style="color: #666; font-size: 14px; margin-top: 12px;">✓ Select all that apply</p>';
                } else {
                    // Single select
                    cardHTML += '<div class="options-grid">';
                    question.options.forEach(option => {
                        cardHTML += `
                            <div class="option" onclick="selectOption(${stepNumber}, this)" data-value="${option.value}" data-points="${option.points}">
                                ${option.text}
                            </div>
                        `;
                    });
                    cardHTML += '</div>';
                }
                
                cardHTML += `
                    <div class="button-group">
                        ${stepNumber > 2 ? `<button class="btn btn-secondary" onclick="previousQuestion(${stepNumber})">← Back</button>` : ''}
                        <button class="btn btn-primary" onclick="nextQuestion(${stepNumber})">${stepNumber === 16 ? 'Get Results' : 'Next →'}</button>
                    </div>
                `;
                
                card.innerHTML = cardHTML;
                container.appendChild(card);
            });
        }
        
        function selectOption(step, element) {
            // Remove selected class from other options
            document.querySelectorAll(`.question-card[data-step="${step}"] .option`).forEach(opt => {
                opt.classList.remove('selected');
            });
            // Add selected class to clicked option
            element.classList.add('selected');
        }
        
        function selectMultiOption(step, element) {
            const isNoneOption = element.dataset.value === 'none';
            const questionCard = document.querySelector(`.question-card[data-step="${step}"]`);
            
            if (isNoneOption) {
                // If "None of the above" is clicked, deselect all other options
                questionCard.querySelectorAll('.option').forEach(opt => {
                    if (opt !== element) {
                        opt.classList.remove('selected');
                        const checkbox = opt.querySelector('.checkbox-icon');
                        if (checkbox) checkbox.textContent = '☐';
                    }
                });
            } else {
                // If any other option is clicked, deselect "None of the above"
                const noneOption = questionCard.querySelector('.option[data-value="none"]');
                if (noneOption && noneOption.classList.contains('selected')) {
                    noneOption.classList.remove('selected');
                    const noneCheckbox = noneOption.querySelector('.checkbox-icon');
                    if (noneCheckbox) noneCheckbox.textContent = '☐';
                }
            }
            
            // Toggle selected class for the clicked option
            element.classList.toggle('selected');
            
            // Update checkbox icon
            const checkboxIcon = element.querySelector('.checkbox-icon');
            if (element.classList.contains('selected')) {
                checkboxIcon.textContent = '☑';
            } else {
                checkboxIcon.textContent = '☐';
            }
        }
        
        function updateProgress() {
            const progress = (assessmentData.currentStep / assessmentData.totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function calculateScore() {
            let totalPoints = 0;
            let maxPoints = 0;
            
            // Only calculate for best-practice questions (q1-q10)
            for (let i = 1; i <= 10; i++) {
                const answer = assessmentData.answers[`q${i}`];
                if (answer) {
                    totalPoints += answer.points;
                    maxPoints += 10; // Each best-practice question is worth max 10 points
                }
            }
            
            return Math.round((totalPoints / maxPoints) * 100);
        }
        
        function getRiskLevel(score) {
            if (score <= 30) return 'high';
            if (score <= 60) return 'moderate';
            if (score <= 80) return 'low';
            return 'ready';
        }
        
        function showResults() {
            document.getElementById('assessmentSection').style.display = 'none';
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.style.display = 'block';

            const score = calculateScore();
            const riskLevel = getRiskLevel(score);

            // Check if user is developing plant-based products
            const isPlantBased = assessmentData.answers.q11 &&
                                 assessmentData.answers.q11.some(answer => answer.value === 'plantbased');

            let resultsHTML = `
                <div class="results-header">
                    <div class="score-display">
                        <div class="score-circle" style="background: conic-gradient(${score > 60 ? '#00bf63' : score > 30 ? '#ef6c00' : '#c62828'} 0deg ${score * 3.6}deg, #e0e0e0 ${score * 3.6}deg);">
                            <div class="score-inner">
                                <div class="score-number">${score}%</div>
                                <div class="score-label">Overall Score</div>
                            </div>
                        </div>
                    </div>
            `;

            // Calculate failure probability (inverse of score)
            const failureProbability = 100 - score;

            // Dynamic content based on score
            if (riskLevel === 'high') {
                resultsHTML += `
                    <span class="risk-badge risk-high">HIGH RISK</span>
                    <h2 class="results-title">Your product faces a ${failureProbability}% failure probability</h2>
                    <p style="color: #666; max-width: 600px; margin: 0 auto;">Before you invest further, let's identify exactly where your product breaks down in real-world conditions.</p>
                </div>

                <div class="insights-list">
                    <h3 style="margin-bottom: 20px;">Critical Gaps Identified</h3>
                    <div class="insight-item">
                        <div class="insight-number">1</div>
                        <div class="insight-text">
                            <strong>Missing real-world validation</strong><br>
                            Lab testing misses 65% of usage issues that emerge in consumers' actual homes
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">2</div>
                        <div class="insight-text">
                            <strong>No behavioral data capture</strong><br>
                            What consumers say differs dramatically from what they actually do
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">3</div>
                        <div class="insight-text">
                            <strong>Unquantified texture performance</strong><br>
                            ${isPlantBased ? 'For plant-based products, texture is the #1 reason consumers reject alternatives' : 'Texture drives satisfaction but remains unmeasured in your current approach'}
                        </div>
                    </div>
                </div>

                <div style="background: white; border-radius: 16px; padding: 30px; margin-bottom: 30px;">
                    <h3 style="font-size: 24px; margin-bottom: 24px; color: #1a1a1a;">Recommended: Foundation Testing Package</h3>

                    <div style="display: grid; gap: 20px; margin-bottom: 24px;">
                        <div style="border-left: 4px solid #1297e0; padding-left: 16px;">
                            <strong style="color: #1297e0; font-size: 18px;">DOMUS</strong>
                            <p style="color: #666; margin-top: 8px;">Full journey vision analytics that track the complete in-home experience—from unboxing to preparation, cooking, consumption, and storage—revealing usability issues that kill products post-launch.</p>
                        </div>

                        ${isPlantBased ? `
                        <div style="border-left: 4px solid #00bf63; padding-left: 16px;">
                            <strong style="color: #00bf63; font-size: 18px;">TEXTURA</strong>
                            <p style="color: #666; margin-top: 8px;">Bite & chew analysis platform that transforms texture from your biggest risk into your competitive advantage. Our proprietary model quantifies mouthfeel, helping plant-based brands achieve the texture consumers actually crave.</p>
                        </div>
                        ` : `
                        <div style="border-left: 4px solid #00bf63; padding-left: 16px;">
                            <strong style="color: #00bf63; font-size: 18px;">VOX</strong>
                            <p style="color: #666; margin-top: 8px;">AI-powered consumer intelligence that captures authentic purchase drivers anywhere consumers are. Our AI moderator conducts natural conversations through a mobile app, revealing the "why" behind decisions.</p>
                        </div>
                        `}
                    </div>

                    <p style="color: #1a1a1a; font-size: 16px; margin-bottom: 8px;"><strong>Why this combination:</strong></p>
                    <p style="color: #666; margin-bottom: 0;">You need immediate visibility into real consumer behavior before investing further. ${isPlantBased ? 'DOMUS captures usage journey failures while TEXTURA quantifies texture acceptance—the #1 plant-based failure point.' : 'DOMUS reveals where your product breaks down in real-world conditions while VOX uncovers purchase barriers and concept weaknesses.'}</p>
                </div>

                <div class="cta-section">
                    <h3 class="cta-title">Schedule Your Strategy Call</h3>
                    <p class="cta-description">30-minute diagnostic with an Eatpol testing specialist. We'll walk through your specific product challenges and create a custom testing roadmap. This call could save you from a €500K+ failed launch.</p>
                    <button class="btn btn-primary" onclick="scheduleCall()">Book Your Strategy Call →</button>
                </div>
                `;
            } else if (riskLevel === 'moderate') {
                resultsHTML += `
                    <span class="risk-badge risk-moderate">MODERATE RISK</span>
                    <h2 class="results-title">Solid foundation, but missing precision insights</h2>
                    <p style="color: #666; max-width: 600px; margin: 0 auto;">You're ahead of most competitors. Now let's add the precision that drives 34% higher purchase intent.</p>
                </div>

                <div class="insights-list">
                    <h3 style="margin-bottom: 20px;">Key Improvement Areas</h3>
                    <div class="insight-item">
                        <div class="insight-number">1</div>
                        <div class="insight-text">
                            <strong>Testing captures basics but misses emotional drivers</strong><br>
                            AI-powered emotion and conversation analysis reveals purchase intent traditional surveys miss
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">2</div>
                        <div class="insight-text">
                            <strong>${isPlantBased ? 'Texture remains unquantified' : 'Missing behavioral precision'}</strong><br>
                            ${isPlantBased ? 'Plant-based texture is the #1 consumer rejection point—bite and chew analysis quantifies what subjective ratings cannot' : 'Quantitative behavioral data separates good products from market leaders'}
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">3</div>
                        <div class="insight-text">
                            <strong>Slower iteration than successful launches</strong><br>
                            Leading brands average 10+ iterations—rapid testing enables this speed without budget explosion
                        </div>
                    </div>
                </div>

                <div style="background: white; border-radius: 16px; padding: 30px; margin-bottom: 30px;">
                    <h3 style="font-size: 24px; margin-bottom: 24px; color: #1a1a1a;">Recommended: Optimization Testing Package</h3>

                    <div style="display: grid; gap: 20px; margin-bottom: 24px;">
                        ${isPlantBased ? `
                        <div style="border-left: 4px solid #00bf63; padding-left: 16px;">
                            <strong style="color: #00bf63; font-size: 18px;">TEXTURA</strong>
                            <p style="color: #666; margin-top: 8px;">Bite & chew analysis that transforms texture from your biggest risk into your competitive advantage. Quantify mouthfeel precision to help your plant-based brand achieve the texture consumers crave.</p>
                        </div>
                        ` : ''}

                        <div style="border-left: 4px solid #1297e0; padding-left: 16px;">
                            <strong style="color: #1297e0; font-size: 18px;">VOX</strong>
                            <p style="color: #666; margin-top: 8px;">AI-powered consumer intelligence that captures authentic purchase drivers. Natural mobile conversations reveal emotional and rational drivers your current surveys cannot access.</p>
                        </div>

                        ${!isPlantBased ? `
                        <div style="border-left: 4px solid #00bf63; padding-left: 16px;">
                            <strong style="color: #00bf63; font-size: 18px;">TEXTURA</strong>
                            <p style="color: #666; margin-top: 8px;">Bite & chew analysis platform that quantifies texture and mouthfeel satisfaction—turning subjective feedback into actionable product improvements.</p>
                        </div>
                        ` : ''}
                    </div>

                    <p style="color: #1a1a1a; font-size: 16px; margin-bottom: 8px;"><strong>Why this combination:</strong></p>
                    <p style="color: #666; margin-bottom: 0;">You're testing, but not capturing the nuanced data that separates good from great. ${isPlantBased ? 'TEXTURA quantifies texture acceptance (the #1 plant-based failure point) while VOX adds emotional and purchase intent data your surveys miss.' : 'TEXTURA adds quantitative precision to texture performance while VOX layers emotional intelligence on top of your existing data.'}</p>
                </div>

                <div class="cta-section">
                    <h3 class="cta-title">Schedule Your Strategy Call</h3>
                    <p class="cta-description">30-minute diagnostic with an Eatpol testing specialist. Get a custom roadmap showing how to convert your basic testing into predictive intelligence.</p>
                    <button class="btn btn-primary" onclick="scheduleCall()">Book Your Strategy Call →</button>
                </div>
                `;
            } else if (riskLevel === 'low') {
                resultsHTML += `
                    <span class="risk-badge risk-low">LOW RISK</span>
                    <h2 class="results-title">Strong testing foundation—ready for competitive edge</h2>
                    <p style="color: #666; max-width: 600px; margin: 0 auto;">You're in the top 20%. Let's put you in the top 5% with the testing stack Fortune 500 brands use.</p>
                </div>

                <div class="insights-list">
                    <h3 style="margin-bottom: 20px;">Competitive Edge Opportunities</h3>
                    <div class="insight-item">
                        <div class="insight-number">1</div>
                        <div class="insight-text">
                            <strong>Accelerate insight velocity</strong><br>
                            Get actionable results in 7 days instead of 4 weeks—enabling 5x more iteration cycles
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">2</div>
                        <div class="insight-text">
                            <strong>${isPlantBased ? 'Quantify texture precision' : 'Add behavioral precision layers'}</strong><br>
                            ${isPlantBased ? 'Bite and chew analysis has helped plant-based brands increase satisfaction scores by 28% through texture optimization' : 'Multi-modal AI analysis (vision + conversation + texture) extracts 3x more insights from the same tests'}
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">3</div>
                        <div class="insight-text">
                            <strong>Capture complete consumer journey</strong><br>
                            Full in-home tracking reveals preparation, storage, and repeat usage patterns competitors miss
                        </div>
                    </div>
                </div>

                <div style="background: white; border-radius: 16px; padding: 30px; margin-bottom: 30px;">
                    <h3 style="font-size: 24px; margin-bottom: 24px; color: #1a1a1a;">Recommended: Competitive Edge Package</h3>
                    <p style="color: #666; margin-bottom: 20px;">Full suite of enterprise-grade consumer intelligence</p>

                    <div style="display: grid; gap: 20px; margin-bottom: 24px;">
                        <div style="border-left: 4px solid #1297e0; padding-left: 16px;">
                            <strong style="color: #1297e0; font-size: 18px;">DOMUS</strong>
                            <p style="color: #666; margin-top: 8px;">Vision analytics tracking the complete in-home journey—from unboxing through preparation, cooking, consumption, and storage.</p>
                        </div>

                        <div style="border-left: 4px solid #00bf63; padding-left: 16px;">
                            <strong style="color: #00bf63; font-size: 18px;">TEXTURA ${isPlantBased ? '(Critical for plant-based)' : ''}</strong>
                            <p style="color: #666; margin-top: 8px;">Bite & chew analysis quantifying texture and mouthfeel satisfaction${isPlantBased ? '—essential for plant-based products where texture drives acceptance' : ' with precision that subjective ratings cannot achieve'}.</p>
                        </div>

                        <div style="border-left: 4px solid #ef6c00; padding-left: 16px;">
                            <strong style="color: #ef6c00; font-size: 18px;">VOX</strong>
                            <p style="color: #666; margin-top: 8px;">AI-moderated mobile conversations capturing purchase drivers and emotional responses in natural settings.</p>
                        </div>
                    </div>

                    <p style="color: #1a1a1a; font-size: 16px; margin-bottom: 8px;"><strong>Why the full suite:</strong></p>
                    <p style="color: #666; margin-bottom: 0;">You understand testing excellence—now build a proprietary consumer intelligence infrastructure. DOMUS accelerates insights (7 days vs 4 weeks), ${isPlantBased ? 'TEXTURA quantifies your #1 risk factor (texture), ' : 'TEXTURA adds quantitative texture precision, '}and VOX layers emotional intelligence across the complete journey.</p>
                </div>

                <div class="cta-section">
                    <h3 class="cta-title">Schedule Your Strategy Call</h3>
                    <p class="cta-description">30-minute diagnostic with an Eatpol testing specialist. Explore how enterprise-grade testing infrastructure creates sustainable competitive advantages.</p>
                    <button class="btn btn-primary" onclick="scheduleCall()">Book Your Strategy Call →</button>
                </div>
                `;
            } else { // ready
                resultsHTML += `
                    <span class="risk-badge risk-ready">LAUNCH READY</span>
                    <h2 class="results-title">World-class testing—ready for predictive advantage</h2>
                    <p style="color: #666; max-width: 600px; margin: 0 auto;">You're in the top 5%. Now let's build predictive models that forecast market performance before competitors launch.</p>
                </div>

                <div class="insights-list">
                    <h3 style="margin-bottom: 20px;">Strategic Partnership Opportunities</h3>
                    <div class="insight-item">
                        <div class="insight-number">1</div>
                        <div class="insight-text">
                            <strong>Ready for predictive AI modeling</strong><br>
                            Forecast market performance before launch with 89% accuracy using custom-trained models
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">2</div>
                        <div class="insight-text">
                            <strong>Build proprietary consumer intelligence</strong><br>
                            ${isPlantBased ? 'Plant-based texture models trained on your product category create defensible competitive moats' : 'Category-specific behavioral models become proprietary assets competitors cannot replicate'}
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">3</div>
                        <div class="insight-text">
                            <strong>Scale testing excellence across product lines</strong><br>
                            Leverage your testing maturity to accelerate portfolio innovation
                        </div>
                    </div>
                </div>

                <div style="background: white; border-radius: 16px; padding: 30px; margin-bottom: 30px;">
                    <h3 style="font-size: 24px; margin-bottom: 24px; color: #1a1a1a;">Recommended: Strategic Partnership</h3>
                    <p style="color: #666; margin-bottom: 20px;">Full platform access with custom AI model development</p>

                    <div style="display: grid; gap: 20px; margin-bottom: 24px;">
                        <div style="border-left: 4px solid #1297e0; padding-left: 16px;">
                            <strong style="color: #1297e0; font-size: 18px;">DOMUS</strong>
                            <p style="color: #666; margin-top: 8px;">Complete in-home journey analytics with custom tracking configured for your category-specific usage patterns.</p>
                        </div>

                        <div style="border-left: 4px solid #00bf63; padding-left: 16px;">
                            <strong style="color: #00bf63; font-size: 18px;">TEXTURA ${isPlantBased ? '(Custom models)' : ''}</strong>
                            <p style="color: #666; margin-top: 8px;">${isPlantBased ? 'Custom bite and chew models trained specifically on your plant-based formulations—creating proprietary texture intelligence' : 'Custom texture analysis models trained on your product category for unmatched precision'}.</p>
                        </div>

                        <div style="border-left: 4px solid #ef6c00; padding-left: 16px;">
                            <strong style="color: #ef6c00; font-size: 18px;">VOX</strong>
                            <p style="color: #666; margin-top: 8px;">AI conversation models fine-tuned for your brand voice and category-specific purchase drivers.</p>
                        </div>

                        <div style="border-left: 4px solid #6990cd; padding-left: 16px;">
                            <strong style="color: #6990cd; font-size: 18px;">PREDICTIVE MODELING</strong>
                            <p style="color: #666; margin-top: 8px;">Custom AI models forecasting market performance with 89% accuracy based on your product portfolio data.</p>
                        </div>
                    </div>

                    <p style="color: #1a1a1a; font-size: 16px; margin-bottom: 8px;"><strong>Why strategic partnership:</strong></p>
                    <p style="color: #666; margin-bottom: 0;">Your testing maturity enables advanced AI applications. Custom model training on your products creates proprietary consumer intelligence infrastructure—${isPlantBased ? 'including plant-based texture models that competitors cannot access' : 'category-specific behavioral models that become strategic assets'}.</p>
                </div>

                <div class="cta-section">
                    <h3 class="cta-title">Schedule Your Strategy Call</h3>
                    <p class="cta-description">30-minute diagnostic with an Eatpol testing specialist. Explore strategic partnership opportunities including custom AI model development and predictive analytics.</p>
                    <button class="btn btn-primary" onclick="scheduleCall()">Book Your Strategy Call →</button>
                </div>
                `;
            }
            
            // Add contact summary
            resultsHTML += `
                <div class="contact-summary">
                    <h3>Your Assessment Details</h3>
                    <p><strong>Name:</strong> ${assessmentData.contact.firstName}</p>
                    <p><strong>Company:</strong> ${assessmentData.contact.company}</p>
                    <p><strong>Email:</strong> ${assessmentData.contact.email}</p>
                    ${assessmentData.contact.phone ? `<p><strong>Phone:</strong> ${assessmentData.contact.phone}</p>` : ''}
                </div>
            `;
            
            resultsSection.innerHTML = resultsHTML;
            
            // Log results for testing
            console.log('Assessment Results:', {
                contact: assessmentData.contact,
                score: score,
                riskLevel: riskLevel,
                answers: assessmentData.answers
            });
        }
        
        // CTA Functions
        async function scheduleCall() {
            const score = calculateScore();
            const riskLevel = getRiskLevel(score);
            const isPlantBased = assessmentData.answers.q11 &&
                                assessmentData.answers.q11.some(answer => answer.value === 'plantbased');

            const assessmentResult = {
                contact: assessmentData.contact,
                score: score,
                riskLevel: riskLevel,
                isPlantBased: isPlantBased,
                answers: assessmentData.answers,
                timestamp: new Date().toISOString()
            };

            // Log to console for debugging
            console.log('Assessment Complete - Sending to server:', assessmentResult);

            try {
                // Send assessment data to PHP handler (same system as demo requests)
                const response = await fetch('assessment.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(assessmentResult)
                });

                const result = await response.json();

                if (result.success) {
                    console.log('Assessment data sent successfully:', result);

                    // Redirect to Calendly booking page
                    window.location.href = 'https://calendly.com/jromberg-eatpol/30min';
                } else {
                    console.error('Server error:', result.message);
                    alert('Your assessment was completed, but there was an issue submitting it. Please email us directly at info@eatpol.com with your information.');
                }
            } catch (error) {
                console.error('Network error:', error);
                alert('There was a connection error. Please email us directly at info@eatpol.com with your assessment details.');
            }
        }
    </script>
</body>
</html>
